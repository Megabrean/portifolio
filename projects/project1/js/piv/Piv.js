class Piv extends Phaser.Scene{constructor(){super({key:"Piv"})}init(){this.adv_state=screenSeen()}create(){this.input.setTopOnly(!0);const e=(lmsPhases.match(/1/g)||[]).length/totalScreen;let t,i;this.piv_logo=this.add.image(1008,0,"piv_logo").setOrigin(0),this.piv_info_bg=this.add.image(0,656,"piv_info_bg").setOrigin(0),t=currentScreen>9?`${currentScreen}/0${totalScreen}`:`0${currentScreen}/0${totalScreen}`,i=`${Math.round(100*e)}%`,this.piv_screen_txt=this.add.text(746,675,t,{fontFamily:"Museo",fontSize:18,color:"#F4F4F4"}),this.piv_percent_txt=this.add.text(536,675,i,{fontFamily:"Museo",fontSize:18,color:"#F4F4F4"}).setOrigin(.5,0),this.piv_back_bt=this.add.image(21,631,"piv_back_bt").setOrigin(0).setInteractive({useHandCursor:!0}),this.piv_back_bt.once("pointerup",()=>{this.piv_back_bt.disableInteractive(),this.sound.stopAll(),this.scene.stop("Piv"),navega_tela(!1)}).on("pointerout",function(){this.setFrame(0)}).on("pointerdown",function(){this.setFrame(1)}),this.piv_next_bt=this.add.image(1179,631,"piv_next_bt",2).setOrigin(0),this.piv_next_bt.on("pointerout",function(){this.setFrame(0)}).on("pointerdown",function(){this.setFrame(1)}),this.piv_blink_fx=this.add.ellipse(1240,636,34,34,"0xFFF1D1").setVisible(!1).setAlpha(.5),this.piv_hint=this.add.ellipse(1240,636,28,28,"0xFFB406").setVisible(!1),this.piv_blink_fx.tween={targets:this.piv_blink_fx,repeat:-1,duration:800,scale:{from:.9,to:1.2},onStart:()=>{this.piv_blink_fx.setVisible(!0)}},this.adv_state&&currentScreen!==totalScreen?this.enable_next_bt():Object.keys(game.scene.keys).filter(e=>game.scene.isActive(e)).forEach((e,t)=>{this.scene.get(e).events.on("screen_ended",()=>{this.enable_next_bt(),this.piv_percent_txt.text=`${Math.round((lmsPhases.match(/1/g)||[]).length/totalScreen*100)}%`})}),this.menu_bt=this.add.image(601,656,"piv_menu_bt").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_bt.on("pointerout",function(){this.setFrame(0)}).on("pointerdown",function(){this.setFrame(1)}),this.menu_container=this.add.container(0,0).setDepth(1),this.menu_bg=this.add.image(640,360,"menu_bg").setInteractive(),this.menu_bt.on("pointerup",()=>{this.tweens.isTweening(this.menu_container)||(this.events.emit("menu_opened"),this.menu_bt.visible=!1,this.update_menu_condition(),this.tweens.add(this.menu_container.open_tween))}),this.menu_items_array=[],this.menu_topics_array=[],this.menu_topic0=this.add.image(65,152,"menu_tp0").setOrigin(0),this.menu_topic0.screen=2,this.menu_topics_array.push(this.menu_topic0),this.menu_topic1=this.add.image(65,289,"menu_tp1").setOrigin(0),this.menu_topic1.screen=4,this.menu_topics_array.push(this.menu_topic1),this.menu_topic2=this.add.image(758,155,"menu_tp2").setOrigin(0),this.menu_topic2.screen=9,this.menu_topics_array.push(this.menu_topic2),this.menu_topic3=this.add.image(758,365,"menu_tp3").setOrigin(0),this.menu_topic3.screen=15,this.menu_topics_array.push(this.menu_topic3),this.menu_item0=this.add.image(70,231,"menu_it0").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item0.screen=3,this.menu_items_array.push(this.menu_item0),this.menu_item1=this.add.image(70,368,"menu_it1").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item1.screen=5,this.menu_items_array.push(this.menu_item1),this.menu_item2=this.add.image(70,406,"menu_it2").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item2.screen=6,this.menu_items_array.push(this.menu_item2),this.menu_item3=this.add.image(70,444,"menu_it3").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item3.screen=7,this.menu_items_array.push(this.menu_item3),this.menu_item4=this.add.image(70,510,"menu_it4").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item4.screen=8,this.menu_items_array.push(this.menu_item4),this.menu_item5=this.add.image(70,548,"menu_it5").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item5.screen=8,this.menu_items_array.push(this.menu_item5),this.menu_item6=this.add.image(767,231,"menu_it6").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item6.screen=10,this.menu_items_array.push(this.menu_item6),this.menu_item7=this.add.image(767,269,"menu_it7").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item7.screen=11,this.menu_items_array.push(this.menu_item7),this.menu_item8=this.add.image(767,307,"menu_it8").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item8.screen=14,this.menu_items_array.push(this.menu_item8),this.menu_item9=this.add.image(767,441,"menu_it9").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item9.screen=16,this.menu_items_array.push(this.menu_item9),this.menu_item10=this.add.image(767,479,"menu_it10").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item10.screen=17,this.menu_items_array.push(this.menu_item10),this.menu_item11=this.add.image(767,517,"menu_it11").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item11.screen=18,this.menu_items_array.push(this.menu_item11),this.menu_item12=this.add.image(767,555,"menu_it12").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item12.screen=19,this.menu_items_array.push(this.menu_item12),this.menu_item13=this.add.image(767,593,"menu_it13").setInteractive({cursor:"pointer"}).setOrigin(0),this.menu_item13.screen=20,this.menu_items_array.push(this.menu_item13),this.close_menu_bt=this.add.image(65,26,"close_pop_bt").setInteractive({cursor:"pointer"}).setOrigin(0),this.close_menu_bt.on("pointerup",()=>{this.tweens.isTweening(this.menu_container)||this.tweens.add(this.menu_container.close_tween),this.close_menu_bt.setFrame(0)}).on("pointerdown",function(){this.setFrame(1)}).on("pointerout",function(){this.setFrame(0)}),this.menu_items_array.forEach(e=>{e.on("pointerup",()=>{if(e.screen!==currentScreen){let t=`screen${currentScreen}`;currentScreen=e.screen,this.sound.stopAll(),this.scene.stop("Piv"),loadScreen(t),this.menu_container.x=-1280}else this.close_menu_bt.emit("pointerup")})}),this.menu_container.add(this.menu_bg).add(this.menu_items_array).add(this.close_menu_bt).add(this.menu_topics_array),this.menu_container.visible=!1,this.menu_container.x=1280,this.menu_container.open_tween={targets:this.menu_container,x:"-=1280",ease:"Sine.easeOut",duration:800,repeat:0,onStart:()=>{this.menu_container.visible=!0}},this.menu_container.close_tween={targets:this.menu_container,x:"+=1280",ease:"Sine.easeOut",duration:500,repeat:0,onComplete:()=>{this.menu_container.visible=!1,this.menu_bt.visible=!0,this.events.emit("menu_closed")}}}enable_next_bt(){currentScreen!==totalScreen&&(this.piv_next_bt.setFrame(0),this.piv_next_bt.setInteractive({cursor:"pointer"}),this.piv_next_bt.once("pointerup",()=>{this.sound.stopAll(),this.piv_next_bt.disableInteractive(),this.scene.stop("Piv"),navega_tela(!0)}),Vfx.fadeIn.call(this,this.piv_hint,0,()=>{this.tweens.add(this.piv_blink_fx.tween)}))}update_menu_condition(){this.menu_items_array.forEach(e=>{"1"===lmsPhases.charAt(e.screen-1)?(e.setFrame(0),e.setInteractive()):(e.setFrame(1),e.disableInteractive())}),this.menu_topics_array.forEach(e=>{"1"===lmsPhases.charAt(e.screen-1)?e.setFrame(0):e.setFrame(1)})}}class Ajuda extends Phaser.Scene{constructor(){super({key:"Ajuda"})}create(){this.input.setTopOnly(!0),this.scene.bringToTop(),this.add.image(640,360,"help_bg").setInteractive({cursor:"default"}),this.close_vd_bt=this.add.image(65,26,"close_pop_bt").setOrigin(0).setInteractive({cursor:"pointer"}),this.close_vd_bt.on("pointerup",()=>{this.close_vd_bt.setFrame(0),this.scene.stop("Ajuda"),this.events.emit("help_closed")}).on("pointerdown",function(){this.setFrame(1)}).on("pointerout",function(){this.setFrame(0)})}}